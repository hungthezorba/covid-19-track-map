{"ast":null,"code":"var _jsxFileName = \"/Users/HungNguyen/SideProject/covid-19-track-map/src/mapBox.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport mapboxgl from 'mapbox-gl';\nmapboxgl.accessToken = 'pk.eyJ1IjoiaHVuZ3RoZXpvcmJhIiwiYSI6ImNrYnE5MTZxYjJrNmMyc3B2YXZtdnFjb20ifQ.iEtRPDaQs56Mr53uQEh65A';\nexport default class MapBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lng: 103.02301,\n      lat: 9.17682,\n      zoom: 2,\n      dotSize: 100\n    };\n  }\n\n  componentDidMount() {\n    const map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/mapbox/streets-v11',\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom\n    });\n    const pulsingDot = {\n      width: this.state.dotSize,\n      height: this.state.dotSize,\n      data: new Uint8Array(this.props.dotSize * this.props.dotSize * 4),\n      onAdd: function () {\n        var canvas = document.createElement('canvas');\n        this.context = canvas.getContext('2d');\n      },\n      render: function () {\n        var duration = 1000;\n        var t = performance.now() % duration / duration;\n        var radius = this.state.size / 2 * 0.3;\n        var outerRadius = this.state.size / 2 * 0.7 * t + radius;\n        var context = this.context; // draw outer circle\n\n        context.clearRect(0, 0, this.width, this.height);\n        context.beginPath();\n        context.arc(this.width / 2, this.height / 2, outerRadius, 0, Math.PI * 2);\n        context.fillStyle = 'rgba(255, 200, 200,' + (1 - t) + ')';\n        context.fill(); // draw inner circle\n\n        context.beginPath();\n        context.arc(this.width / 2, this.height / 2, radius, 0, Math.PI * 2);\n        context.fillStyle = 'rgba(255, 100, 100, 1)';\n        context.strokeStyle = 'white';\n        context.lineWidth = 2 + 4 * (1 - t);\n        context.fill();\n        context.stroke(); // update this image's data with data from the canvas\n\n        this.data = context.getImageData(0, 0, this.width, this.height).data; // continuously repaint the map, resulting in the smooth animation of the dot\n\n        this.state.map.triggerRepaint(); // return `true` to let the map know that the image was updated\n\n        return true;\n      }\n    };\n    map.on('load', function () {\n      map.addImage('pulsing-dot', this.pulsingDot, {\n        pixelRatio: 2\n      });\n      map.addSource('points', {\n        'type': 'geojson',\n        'data': {\n          'type': 'FeatureCollection',\n          'features': [{\n            'type': 'Feature',\n            'geometry': {\n              'type': 'Point',\n              'coordinates': [0, 0]\n            }\n          }]\n        }\n      });\n      map.addLayer({\n        'id': 'points',\n        'type': 'symbol',\n        'source': 'points',\n        'layout': {\n          'icon-image': 'pulsing-dot'\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: element => this.mapContainer = element,\n      className: \"mapContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/HungNguyen/SideProject/covid-19-track-map/src/mapBox.js"],"names":["React","ReactDOM","mapboxgl","accessToken","MapBox","Component","constructor","props","state","lng","lat","zoom","dotSize","componentDidMount","map","Map","container","mapContainer","style","center","pulsingDot","width","height","data","Uint8Array","onAdd","canvas","document","createElement","context","getContext","render","duration","t","performance","now","radius","size","outerRadius","clearRect","beginPath","arc","Math","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","getImageData","triggerRepaint","on","addImage","pixelRatio","addSource","addLayer","element"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport mapboxgl from 'mapbox-gl';\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiaHVuZ3RoZXpvcmJhIiwiYSI6ImNrYnE5MTZxYjJrNmMyc3B2YXZtdnFjb20ifQ.iEtRPDaQs56Mr53uQEh65A';\n\n\n\nexport default class MapBox extends React.Component {\n\n    \n\n    constructor(props) {\n        super(props);\n        this.state = {\n        lng: 103.02301,\n        lat: 9.17682,\n        zoom: 2,\n        dotSize: 100,\n    }\n    \n}\n    \n\n    componentDidMount() {\n        const map = new mapboxgl.Map({\n        container: this.mapContainer,\n        style: 'mapbox://styles/mapbox/streets-v11',\n        center: [this.state.lng, this.state.lat],\n        zoom: this.state.zoom\n        });\n\n        const pulsingDot = {\n            width: this.state.dotSize,\n            height: this.state.dotSize,\n            data: new Uint8Array(this.props.dotSize * this.props.dotSize * 4),\n            onAdd: function() {\n                var canvas = document.createElement('canvas');\n                this.context = canvas.getContext('2d');\n            },\n            render: function() {\n                var duration = 1000;\n                var t = (performance.now() % duration) / duration;\n                 \n                var radius = (this.state.size / 2) * 0.3;\n                var outerRadius = (this.state.size / 2) * 0.7 * t + radius;\n                var context = this.context;\n                 \n                // draw outer circle\n                context.clearRect(0, 0, this.width, this.height);\n                context.beginPath();\n                context.arc(\n                this.width / 2,\n                this.height / 2,\n                outerRadius,\n                0,\n                Math.PI * 2\n                );\n                context.fillStyle = 'rgba(255, 200, 200,' + (1 - t) + ')';\n                context.fill();\n                 \n                // draw inner circle\n                context.beginPath();\n                context.arc(\n                this.width / 2,\n                this.height / 2,\n                radius,\n                0,\n                Math.PI * 2\n                );\n                context.fillStyle = 'rgba(255, 100, 100, 1)';\n                context.strokeStyle = 'white';\n                context.lineWidth = 2 + 4 * (1 - t);\n                context.fill();\n                context.stroke();\n                 \n                // update this image's data with data from the canvas\n                this.data = context.getImageData(\n                0,\n                0,\n                this.width,\n                this.height\n                ).data;\n                 \n                // continuously repaint the map, resulting in the smooth animation of the dot\n                this.state.map.triggerRepaint();\n                 \n                // return `true` to let the map know that the image was updated\n                return true;\n                }\n        }\n\n        map.on('load', function() {\n            map.addImage('pulsing-dot', this.pulsingDot, { pixelRatio: 2 });\n             \n            map.addSource('points', {\n            'type': 'geojson',\n            'data': {\n            'type': 'FeatureCollection',\n            'features': [\n            {\n            'type': 'Feature',\n            'geometry': {\n            'type': 'Point',\n            'coordinates': [0, 0]\n            }\n            }\n            ]\n            }\n            });\n            map.addLayer({\n            'id': 'points',\n            'type': 'symbol',\n            'source': 'points',\n            'layout': {\n            'icon-image': 'pulsing-dot'\n            }\n            });\n            });\n    }\n\n   \n    \n\n    render() {\n        return (\n            <div>\n                <div ref={element => this.mapContainer = element} className=\"mapContainer\"/>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}